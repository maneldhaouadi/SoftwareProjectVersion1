{% load static %}
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>medical</title>

    <!-- favicon -->
    <link rel="icon" href="{% static 'img/favicon.png' %}">
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <!-- animate CSS -->
    <link rel="stylesheet" href="{% static 'css/animate.css' %}">
    <!-- owl carousel CSS -->
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
    <!-- themify CSS -->
    <link rel="stylesheet" href="{% static 'css/themify-icons.css' %}">
    <!-- flaticon CSS -->
    <link rel="stylesheet" href="{% static 'css/flaticon.css' %}">
    <!-- magnific popup CSS -->
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
    <!-- nice select CSS -->
    <link rel="stylesheet" href="{% static 'css/nice-select.css' %}">
    <!-- swiper CSS -->
    <link rel="stylesheet" href="{% static 'css/slick.css' %}">
    <!-- style CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>

<style>
.form-section {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 40px 15px;
    position: relative;
    overflow: hidden;
    background: linear-gradient(135deg, #1e88e5 0%, #1565c0 25%, #0d47a1 50%, #1565c0 75%, #1e88e5 100%);
    background-size: 400% 400%;
    animation: gradientShift 8s ease infinite;
}

/* Animation du d√©grad√© bleu */
@keyframes gradientShift {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

/* Bulles m√©dicales flottantes */
.form-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
        radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(255, 255, 255, 0.08) 0%, transparent 20%),
        radial-gradient(circle at 30% 70%, rgba(255, 255, 255, 0.06) 0%, transparent 15%),
        radial-gradient(circle at 70% 30%, rgba(255, 255, 255, 0.04) 0%, transparent 15%);
    animation: float 8s ease-in-out infinite;
}

/* Animation des bulles */
@keyframes float {
    0%, 100% {
        transform: translateY(0px) scale(1);
    }
    50% {
        transform: translateY(-15px) scale(1.02);
    }
}

/* Effet de st√©thoscope anim√© */
.form-section::after {
    content: '‚ûï';
    position: absolute;
    font-size: 24px;
    color: rgba(255, 255, 255, 0.1);
    animation: medicalIcons 20s linear infinite;
}

@keyframes medicalIcons {
    0% {
        transform: translateX(-100px) translateY(100px) rotate(0deg);
        opacity: 0;
    }
    10% {
        opacity: 0.3;
    }
    90% {
        opacity: 0.3;
    }
    100% {
        transform: translateX(calc(100vw + 100px)) translateY(-100px) rotate(360deg);
        opacity: 0;
    }
}

/* Formulaire avec effet de verre m√©dical */
.animated-form {
    box-shadow: 
        0 20px 40px rgba(13, 71, 161, 0.2),
        0 0 0 1px rgba(255, 255, 255, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 20px;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(15px);
    position: relative;
    z-index: 1;
    transform: translateY(0);
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.3);
}

.animated-form:hover {
    transform: translateY(-5px);
    box-shadow: 
        0 25px 50px rgba(13, 71, 161, 0.3),
        0 0 0 1px rgba(255, 255, 255, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

/* Bouton avec d√©grad√© bleu m√©dical */
.btn-animated {
    transition: all 0.3s ease;
    padding: 12px 35px;
    font-weight: 600;
    background: linear-gradient(135deg, #1976d2, #0d47a1);
    border: none;
    border-radius: 12px;
    color: white;
    position: relative;
    overflow: hidden;
    font-size: 1.1rem;
    box-shadow: 0 4px 15px rgba(13, 71, 161, 0.3);
}

.btn-animated::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s;
}

.btn-animated:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(13, 71, 161, 0.4);
    background: linear-gradient(135deg, #1e88e5, #1565c0);
}

.btn-animated:hover::before {
    left: 100%;
}

/* Animation d'entr√©e pour le formulaire */
@keyframes formEntrance {
    0% {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.animated-form {
    animation: formEntrance 0.8s ease-out;
}

/* Style pour les inputs avec th√®me m√©dical */
.form-control {
    border: 2px solid #e3f2fd;
    border-radius: 12px;
    padding: 12px 15px;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.9);
    font-size: 1rem;
}

.form-control:focus {
    border-color: #1976d2;
    box-shadow: 0 0 0 0.2rem rgba(25, 118, 210, 0.15);
    background: white;
    transform: translateY(-2px);
}

/* Style pour les labels */
.form-label {
    font-weight: 600;
    color: #1565c0;
    margin-bottom: 8px;
    display: block;
    font-size: 0.95rem;
}

/* Style pour les selects */
.form-select {
    border: 2px solid #e3f2fd;
    border-radius: 12px;
    padding: 12px 15px;
    background: rgba(255, 255, 255, 0.9);
    transition: all 0.3s ease;
}

.form-select:focus {
    border-color: #1976d2;
    box-shadow: 0 0 0 0.2rem rgba(25, 118, 210, 0.15);
    background: white;
    transform: translateY(-2px);
}

/* Titre avec d√©grad√© bleu m√©dical */
h2 {
    background: linear-gradient(135deg, #1976d2, #0d47a1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 700;
    position: relative;
    font-size: 2rem;
}

h2::after {
    content: '';
    position: absolute;
    bottom: -12px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 4px;
    background: linear-gradient(135deg, #1976d2, #0d47a1);
    border-radius: 2px;
}

/* Ic√¥nes m√©dicales d√©coratives */
.medical-decoration {
    position: absolute;
    font-size: 20px;
    opacity: 0.1;
    color: white;
    animation: medicalFloat 15s linear infinite;
}

.medical-decoration:nth-child(1) { content: '‚ù§Ô∏è'; top: 10%; left: 5%; animation-delay: 0s; }
.medical-decoration:nth-child(2) { content: 'ü©∫'; top: 20%; right: 10%; animation-delay: 3s; }
.medical-decoration:nth-child(3) { content: 'üíä'; bottom: 30%; left: 15%; animation-delay: 6s; }
.medical-decoration:nth-child(4) { content: 'üè•'; bottom: 15%; right: 5%; animation-delay: 9s; }

@keyframes medicalFloat {
    0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
    }
    10% {
        opacity: 0.1;
    }
    90% {
        opacity: 0.1;
    }
    100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
    }
}

/* Responsive */
@media (max-width: 768px) {
    .animated-form {
        margin: 20px;
        padding: 30px 20px;
    }
    
    h2 {
        font-size: 1.5rem;
    }
    
    .btn-animated {
        padding: 10px 25px;
        font-size: 1rem;
    }
}
</style>

<div class="form-section d-flex align-items-center justify-content-center min-vh-100">
    <!-- Ic√¥nes m√©dicales d√©coratives -->
    <div class="medical-decoration"></div>
    <div class="medical-decoration"></div>
    <div class="medical-decoration"></div>
    <div class="medical-decoration"></div>
    
    <div class="card p-5 animated-form" style="max-width: 800px; width: 100%;">
        <h2 class="mb-4 text-center">
            {% if is_edit %}
                ‚úèÔ∏è Modifier le mat√©riel m√©dical
            {% else %}
                ‚ûï Ajouter un nouveau mat√©riel m√©dical
            {% endif %}
        </h2>

        <!-- Affichage des erreurs -->
        {% if form.errors %}
        <div class="alert alert-danger">
            <strong>Veuillez corriger les erreurs suivantes :</strong>
            <ul>
            {% for field, errors in form.errors.items %}
                {% for error in errors %}
                    <li>{{ field }}: {{ error }}</li>
                {% endfor %}
            {% endfor %}
            </ul>
        </div>
        {% endif %}

        <form method="POST">
            {% csrf_token %}
            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label">Nom du mat√©riel</label>
                    <input type="text" name="Nom" placeholder="Nom du mat√©riel" required class="form-control"
                           value="{% if form.Nom.value %}{{ form.Nom.value }}{% endif %}">
                </div>
                <div class="col-md-6">
                    <label class="form-label">Type</label>
                    <input type="text" name="Type" placeholder="Type" required class="form-control"
                           value="{% if form.Type.value %}{{ form.Type.value }}{% endif %}">
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label">R√©f√©rence</label>
                    <input type="text" name="Reference" placeholder="R√©f√©rence" required class="form-control"
                           value="{% if form.Reference.value %}{{ form.Reference.value }}{% endif %}">
                </div>
                <div class="col-md-6">
                    <label class="form-label">√âtat</label>
                    {% if is_edit %}
                        <select name="Etat" required class="form-control">
                            <option value="EN_SERVICE" {% if form.Etat.value == 'EN_SERVICE' %}selected{% endif %}>üü¢ En service</option>
                            <option value="EN_MAINTENANCE" {% if form.Etat.value == 'EN_MAINTENANCE' %}selected{% endif %}>üü† En maintenance</option>
                            <option value="HORS_SERVICE" {% if form.Etat.value == 'HORS_SERVICE' %}selected{% endif %}>üî¥ Hors service</option>
                            <option value="EN_PRET" {% if form.Etat.value == 'EN_PRET' %}selected{% endif %}>üîµ En pr√™t</option>
                        </select>
                    {% else %}
                        <input type="text" class="form-control" value="üü¢ En service" readonly>
                        <input type="hidden" name="Etat" value="EN_SERVICE">
                    {% endif %}
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-4">
                    <label class="form-label">Quantit√©</label>
                    <input type="number" name="Quantite" placeholder="Qt√©" min="1" required class="form-control"
                           value="{% if form.Quantite.value %}{{ form.Quantite.value }}{% else %}1{% endif %}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Prix (‚Ç¨)</label>
                    <input type="number" name="PrixAchat" placeholder="Prix (‚Ç¨)" step="0.01" min="0" required class="form-control"
                           value="{% if form.PrixAchat.value %}{{ form.PrixAchat.value }}{% else %}0{% endif %}">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Date d'acquisition</label>
                    <input type="date" name="DateAcquisition" required class="form-control"
                           value="{% if form.DateAcquisition.value %}{{ form.DateAcquisition.value|date:'Y-m-d' }}{% endif %}">
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label">Date d'expiration</label>
                    <input type="date" name="DateExpiration" required class="form-control"
                           value="{% if form.DateExpiration.value %}{{ form.DateExpiration.value|date:'Y-m-d' }}{% endif %}">
                </div>
            </div>
            <div class="text-center">
                <button type="submit" class="btn btn-animated">
                    {% if is_edit %}‚úèÔ∏è Modifier{% else %}‚ûï Ajouter{% endif %} le mat√©riel
                </button>
            </div>
        </form>
    </div>
</div>
